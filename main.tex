\documentclass[oneside]{book}
\usepackage{geometry}
\usepackage{amsmath,amsthm,amssymb}
\usepackage[T1]{fontenc}
\usepackage{tikz}
\usepackage[shortlabels]{enumitem}
\usepackage{moreenum}
\usepackage{maths}
\usepackage{tikz-cd}
\usepackage[greek, french]{babel}

\title{Eléments de théorie des groupes \\ Résolutions des exercices}

\author{Enoncés de Josette Calais. \\ Résolutions de Oestromemes abonnez vous}

\date{}

%http://zoonek.free.fr/LaTeX/LaTeX_samples_chapter/0.html
\makeatletter
\def\thickhrulefill{\leavevmode \leaders \hrule height 1ex \hfill \kern \z@}
\def\@makechapterhead#1{%
  %\vspace*{50\p@}%
  \vspace*{0\p@}%
  {\parindent \z@ \centering \reset@font
        \thickhrulefill\quad
        \scshape \@chapapp{} \thechapter
        \quad \thickhrulefill
        \par\nobreak
        \vspace*{10\p@}%
        \interlinepenalty\@M
        \hrule
        \vspace*{10\p@}%
        \Huge \bfseries #1\par\nobreak
        \par
        \vspace*{10\p@}%
        \hrule
    %\vskip 40\p@
    \vskip 30\p@
  }}
\def\@makeschapterhead#1{%
  %\vspace*{50\p@}%
  \vspace*{10\p@}%
  {\parindent \z@ \centering \reset@font
        \thickhrulefill
        \par\nobreak
        \vspace*{10\p@}%
        \interlinepenalty\@M
        \hrule
        \vspace*{10\p@}%
        \Huge \bfseries #1\par\nobreak
        \par
        \vspace*{10\p@}%
        \hrule
    %\vskip 40\p@
    \vskip 20\p@
  }}



\geometry{
    a4paper,
    total={170mm,257mm},
    left=20mm,
    top=20mm,
    }
%%% Pour chacun des chapitres, le nombre d'exercices
%%% et le dossier dans lequel sont leurs solutions.
\newcommand*{\thebook}{%
  % dossier/chapitre/nombre d'exercices
  1-structure_de_groupe/Structure de groupe/34,
  2-classes_modulo_un_sous_groupe/Classes modulo un sous-groupe/11,
  3-groupes_monogenes_groupes_symetriques_groupes_diedraux/{Groupes monogènes, symétriques et diédraux}/33,
  4-sous_groupes_normaux/Sous-groupes normaux/38,
  5-groupe_operant_sur_un_ensemble/Groupe opérant sur un ensemble/27,
  6-groupes_finis_theoremes_de_sylow/Groupes finis. Théorèmes de Sylow/26,
  7-suites_de_composition/Suites de composition/35,
  8-groupes_abeliens/Groupes abéliens/23,
  9-groupes_libres_generateurs_et_relations/Groupes libres. Générateurs et relations. Produit libre de groupes/12%
}


\begin{document}

\maketitle

\tableofcontents

\foreach \folder/\chaptertitle/\exonb [count=\chapternum] in \thebook {

    \IfFileExists{./solutions/\folder/\chapternum-1}{
        \chapter{\chaptertitle}
        \foreach \exo in {1,...,\exonb}{

            \IfFileExists{./enonces/\folder/\chapternum-\exo}{
                \IfFileExists{./solutions/\folder/\chapternum-\exo}{
                \textbf{\exo )}     
                \input{./enonces/\folder/\chapternum-\exo}
                    \begin{center}
    
            \rule{0.4\textwidth}{0.2pt}
\end{center}
                    \input{./solutions/\folder/\chapternum-\exo}
\begin{center}
                \rule{\textwidth}{1pt}
\end{center}
                }{}
            }{}

        }
    }{}


}

\end{document}